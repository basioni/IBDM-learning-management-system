/*! BuddyDrive - v2.1.0 - 2017-04-11 11:17:17 PM UTC - https://github.com/mrpritchett/buddydrive/ */
window.wp=window.wp||{},window.bp=window.bp||{},window.buddydrive=window.buddydrive||{},function(){return"undefined"==typeof BuddyDrive_App?!1:("undefined"==typeof BP_Uploader?_.extend(buddydrive,_.pick(wp,"Backbone","ajax","template")):_.extend(buddydrive,bp),buddydrive.Models=buddydrive.Models||{},buddydrive.Collections=buddydrive.Collections||{},buddydrive.Settings=BuddyDrive_App.settings||{},buddydrive.Strings=BuddyDrive_App.strings||{},buddydrive.Models.Query=Backbone.Model.extend({defaults:{paged:1,buddydrive_scope:"public",search:""}}),buddydrive.Models.Item=Backbone.Model.extend({defaults:{id:0,user_id:0,privacy:"public",link:"",type:"",date_created:0,date_edited:0},update:function(a,b){return b=b||{},b.context=this,b.data=a||{},b.data=_.extend(b.data,{action:"buddydrive_item_update",buddydrive_nonce:buddydrive.Settings.nonces.update_item}),buddydrive.ajax.send(b)}}),buddydrive.Models.bpObject=Backbone.Model.extend({defaults:{id:0,buddydrive_type:"group",name:"",link:"",avatar:""}}),buddydrive.Models.Stat=Backbone.Model.extend({defaults:{id:0,used:0},stat:function(a){return a=_.extend(a||{},{context:this,success:this.populate}),a.data=_.extend(a.data||{},{action:"buddydrive_get_stats",buddydrive_nonce:buddydrive.Settings.nonces.user_stats}),buddydrive.ajax.send(a)},populate:function(a){this.set(a)}}),buddydrive.Collections.Items=Backbone.Collection.extend({model:buddydrive.Models.Item,initialize:function(){this.options={paged:1,has_more_items:!1}},sync:function(a,b,c){return c=c||{},c.context=this,c.data=c.data||{},"read"===a?(c.data=_.extend(c.data,{action:"buddydrive_fetch_items",buddydrive_nonce:buddydrive.Settings.nonces.fetch_items}),buddydrive.ajax.send(c)):void 0},bulkEdit:function(a){return a=_.extend(a||{},{context:this,success:this.doBulk}),a.data=_.extend(a.data||{},{action:"buddydrive_bulk_edit_items",buddydrive_nonce:buddydrive.Settings.nonces.bulk_edit}),buddydrive.ajax.send(a)},doBulk:function(a){this.remove(a)},addFolder:function(a){return a=_.extend(a||{},{context:this,success:this.insertFolder}),a.data=_.extend(a.data||{},{action:"buddydrive_add_folder",buddydrive_nonce:buddydrive.Settings.nonces.new_folder}),buddydrive.ajax.send(a)},insertFolder:function(a){this.add(a)},parse:function(a){var b=a.items;return this.options=a.metas||this.options,_.isArray(b)||(b=[b]),_.each(b,function(a,c){_.isNull(a)||(b[c].date_created=new Date(a.date_created),b[c].date_edited=new Date(a.date_edited))}),b}}),void(buddydrive.Collections.bpObjects=Backbone.Collection.extend({model:buddydrive.Models.bpObject,sync:function(a,b,c){return"read"===a?(c=c||{},c.context=this,c.data=_.extend(c.data||{},{action:"buddydrive_get_bpobjects",buddydrive_nonce:buddydrive.Settings.nonces.fetch_objects}),buddydrive.ajax.send(c)):void 0},parse:function(a,b){return _.isArray(a)||(a=[a]),_.isUndefined(b.data.existing)||_.each(a,function(a){a.selected=!0}),a}})))}(buddydrive);